<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÆKON Research Console</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Red+Hat+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cal+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'neon-blue': '#00ffff',
                        'neon-purple': '#8b5cf6',
                        'neon-pink': '#ff69b4',
                        'cyber-dark': '#0a0b0d',
                        'cyber-darker': '#14161a',
                        'terminal-green': '#39ff14',
                    },
                    fontFamily: {
                        'sans': ['Cal Sans', 'Red Hat Display', 'system-ui', 'sans-serif'],
                        'display': ['Red Hat Display', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'Fira Code', 'monospace'],
                        'cal': ['Cal Sans', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'gradient-shift': 'gradient-shift 3s ease infinite',
                        'glow-pulse': 'glow-pulse 2s ease-in-out infinite alternate',
                        'slide-down': 'slide-down 0.3s ease-out',
                        'slide-up': 'slide-up 0.3s ease-out',
                        'fade-in': 'fade-in 0.2s ease-out',
                        'bounce-in': 'bounce-in 0.4s ease-out',
                    },
                    keyframes: {
                        'gradient-shift': {
                            '0%, 100%': { 'background-position': '0% 50%' },
                            '50%': { 'background-position': '100% 50%' },
                        },
                        'glow-pulse': {
                            '0%': { 'box-shadow': '0 0 20px rgba(0, 255, 255, 0.4)' },
                            '100%': { 'box-shadow': '0 0 30px rgba(0, 255, 255, 0.8)' },
                        },
                        'slide-down': {
                            '0%': { transform: 'translateY(-10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        'slide-up': {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        'fade-in': {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        'bounce-in': {
                            '0%': { transform: 'scale(0.9)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)', opacity: '0.8' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Cal Sans', 'Red Hat Display', 'JetBrains Mono', monospace;
            background: 
                url('/public/noise-bg.png') center/cover,
                radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 105, 180, 0.08) 0%, transparent 50%),
                linear-gradient(135deg, #0a0b0d 0%, #14161a 100%);
            background-attachment: fixed;
            color: #e4e4e7;
            overflow: hidden;
            height: 100vh;
        }

        .cyber-border {
            border: 2px solid rgba(0, 255, 255, 0.6);
            background: rgba(10, 11, 13, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 12px;
            position: relative;
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.4),
                inset 0 0 20px rgba(0, 255, 255, 0.1);
        }

        .cyber-border::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 12px;
            padding: 2px;
            background: linear-gradient(45deg, 
                rgba(0, 255, 255, 0.8),
                rgba(139, 92, 246, 0.6),
                rgba(255, 105, 180, 0.7),
                rgba(0, 255, 255, 0.8)
            );
            background-size: 400% 400%;
            animation: gradient-shift 3s ease infinite;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            -webkit-mask-composite: xor;
            pointer-events: none;
            z-index: -1;
        }

        .cyber-button {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(139, 92, 246, 0.2));
            border: 2px solid rgba(0, 255, 255, 0.5);
            border-radius: 8px;
            padding: 8px 16px;
            color: #e4e4e7;
            font-family: 'Red Hat Display', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .cyber-button:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.3), rgba(139, 92, 246, 0.3));
            border-color: rgba(0, 255, 255, 0.8);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.5);
            transform: translateY(-1px);
        }

        .folder-item {
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            font-family: 'Red Hat Display', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .folder-item:hover {
            background: rgba(0, 255, 255, 0.1);
            transform: translateX(4px);
            box-shadow: inset 3px 0 0 rgba(0, 255, 255, 0.6);
        }

        .folder-item.selected {
            background: rgba(0, 255, 255, 0.2);
            border-left: 4px solid #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .folder-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.3s ease;
            padding: 0 0 0 24px;
        }

        .folder-content.expanded {
            max-height: 500px;
            padding: 8px 0 8px 24px;
        }

        .confidence-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            box-shadow: 0 0 8px currentColor;
        }

        .conf-direct { color: #00ffff; background: #00ffff; }
        .conf-verified { color: #39ff14; background: #39ff14; }
        .conf-community { color: #fbbf24; background: #fbbf24; }
        .conf-speculation { color: #fb7185; background: #fb7185; }
        .conf-ai { color: #8b5cf6; background: #8b5cf6; }

        .content-area {
            padding: 24px;
            overflow-y: auto;
            height: 100%;
        }

        .chat-collapsed {
            height: 60px;
            overflow: hidden;
        }

        .chat-expanded {
            height: 300px;
        }

        .explorer-sidebar {
            width: 350px;
            border-right: 2px solid rgba(0, 255, 255, 0.3);
            background: rgba(10, 11, 13, 0.95);
            backdrop-filter: blur(20px);
        }

        .tool-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(0, 255, 255, 0.3);
        }

        .tool-panel.expanded {
            max-height: 400px;
        }

        @keyframes expand-bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .folder-item.expanding {
            animation: expand-bounce 0.3s ease-out;
        }
    </style>
</head>
<body class="flex flex-col h-screen">
    <!-- Header -->
    <header class="cyber-border m-4 mb-0 p-4 flex-shrink-0">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-6">
                <h1 class="text-4xl font-bold font-cal text-transparent bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text tracking-wider">
                    BÆKON
                </h1>
                <span class="text-lg text-zinc-400 font-display">Mystery Explorer</span>
            </div>
            <div class="flex items-center space-x-6">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 rounded-full bg-terminal-green animate-pulse conf-verified"></div>
                    <span class="text-sm font-mono text-terminal-green">SYSTEMS ACTIVE</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex flex-1 m-4 mt-2 gap-4 min-h-0">
        <!-- Explorer Sidebar -->
        <aside class="explorer-sidebar cyber-border flex flex-col">
            <div class="p-4 border-b border-cyan-400/30">
                <h2 class="text-lg font-semibold font-display text-neon-blue">Knowledge Explorer</h2>
            </div>
            
            <div class="flex-1 overflow-y-auto p-2">
                <!-- FL Research Section -->
                <div class="mb-4">
                    <div class="folder-item font-semibold text-cyan-300" onclick="toggleFolder('fl-research')">
                        <span id="fl-research-icon">📁</span> Forgotten Languages
                    </div>
                    <div id="fl-research-content" class="folder-content">
                        <div class="folder-item" onclick="selectItem('fl-official', 'FL Official Content')">
                            <span class="confidence-indicator conf-direct"></span>Official Articles
                        </div>
                        <div class="folder-item" onclick="selectItem('fl-translations', 'FL Translations')">
                            <span class="confidence-indicator conf-verified"></span>Translation Lexicons
                        </div>
                        <div class="folder-item" onclick="selectItem('fl-community', 'FL Community Research')">
                            <span class="confidence-indicator conf-community"></span>Community Analysis
                        </div>
                        <div class="folder-item" onclick="selectItem('fl-theories', 'FL Theories')">
                            <span class="confidence-indicator conf-speculation"></span>Theories & Speculation
                        </div>
                        <div class="folder-item" onclick="selectItem('fl-audio', 'FL Audio Analysis')">
                            <span class="confidence-indicator conf-verified"></span>Audio/Video Analysis
                        </div>
                    </div>
                </div>

                <!-- Related Mysteries -->
                <div class="mb-4">
                    <div class="folder-item font-semibold text-purple-300" onclick="toggleFolder('related-mysteries')">
                        <span id="related-mysteries-icon">📁</span> Related Mysteries
                    </div>
                    <div id="related-mysteries-content" class="folder-content">
                        <div class="folder-item" onclick="selectItem('cicada', 'Cicada 3301')">
                            <span class="confidence-indicator conf-verified"></span>Cicada 3301
                        </div>
                        <div class="folder-item" onclick="selectItem('voynich', 'Voynich Manuscript')">
                            <span class="confidence-indicator conf-community"></span>Voynich Manuscript
                        </div>
                        <div class="folder-item" onclick="selectItem('other', 'Other Mysteries')">
                            <span class="confidence-indicator conf-speculation"></span>Other Linguistics
                        </div>
                    </div>
                </div>

                <!-- Research Tools -->
                <div class="mb-4">
                    <div class="folder-item font-semibold text-pink-300" onclick="toggleFolder('tools')">
                        <span id="tools-icon">🔧</span> Research Tools
                    </div>
                    <div id="tools-content" class="folder-content">
                        <div class="folder-item" onclick="toggleTool('ana-index')">
                            <span class="confidence-indicator conf-verified"></span>Ana's Index Search
                        </div>
                        <div class="folder-item" onclick="toggleTool('lexicon')">
                            <span class="confidence-indicator conf-direct"></span>Aylid Lexicon
                        </div>
                        <div class="folder-item" onclick="toggleTool('translation')">
                            <span class="confidence-indicator conf-ai"></span>AI Translation
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tool Panel -->
            <div id="tool-panel" class="tool-panel">
                <div class="p-4">
                    <div id="tool-content">
                        <!-- Tool content will be loaded here -->
                    </div>
                </div>
            </div>
        </aside>

        <!-- Content Area -->
        <main class="flex-1 cyber-border flex flex-col min-w-0">
            <div class="content-area flex-1">
                <div id="main-content">
                    <div class="animate-fade-in">
                        <h1 class="text-3xl font-bold font-cal text-neon-blue mb-6">Welcome to BÆKON Research</h1>
                        
                        <div class="space-y-6 text-zinc-300 font-display">
                            <p class="text-lg">
                                Navigate the mysteries of Forgotten Languages and related phenomena through an organized, confidence-tracked knowledge base.
                            </p>
                            
                            <div class="cyber-border p-6">
                                <h2 class="text-xl font-semibold text-neon-purple mb-4">How to Use</h2>
                                <ul class="space-y-2 text-sm">
                                    <li><span class="confidence-indicator conf-direct"></span><strong>Direct Sources</strong> - Official FL content</li>
                                    <li><span class="confidence-indicator conf-verified"></span><strong>Verified</strong> - Community-confirmed research</li>
                                    <li><span class="confidence-indicator conf-community"></span><strong>Community</strong> - Human analysis and discussion</li>
                                    <li><span class="confidence-indicator conf-speculation"></span><strong>Speculation</strong> - Theories and unverified claims</li>
                                    <li><span class="confidence-indicator conf-ai"></span><strong>AI Analysis</strong> - Machine learning insights</li>
                                </ul>
                            </div>
                            
                            <div class="cyber-border p-6">
                                <h2 class="text-xl font-semibold text-neon-blue mb-4">Start Exploring</h2>
                                <p>Click on any folder in the explorer to dive into specific areas of research. Use the tools section to access search and translation features.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Interface (Collapsed by default) -->
            <div id="chat-interface" class="chat-collapsed border-t border-cyan-400/30 bg-black/30 transition-all duration-300">
                <div class="p-4">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-display text-neon-blue">AI Research Assistant</h3>
                        <button onclick="toggleChat()" class="cyber-button text-xs">
                            <span id="chat-toggle-text">EXPAND</span>
                        </button>
                    </div>
                    <div id="chat-content" class="hidden">
                        <div id="chat-messages" class="h-48 overflow-y-auto mb-4 cyber-border p-3 bg-black/20">
                            <div class="text-xs text-zinc-500">Ask me anything about the mysteries...</div>
                        </div>
                        <div class="flex gap-2">
                            <input 
                                id="chat-input" 
                                type="text" 
                                placeholder="Ask about FL, request translations, explore connections..."
                                class="flex-1 bg-black/40 border border-cyan-400/30 rounded px-3 py-2 text-sm text-zinc-200 focus:border-cyan-400/70 focus:outline-none"
                                onkeypress="if(event.key==='Enter') sendMessage()"
                            />
                            <button onclick="sendMessage()" class="cyber-button text-xs px-4">SEND</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let currentSelection = null;
        let chatExpanded = false;

        function toggleFolder(folderId) {
            const content = document.getElementById(folderId + '-content');
            const icon = document.getElementById(folderId + '-icon');
            const folderItem = icon.parentElement;
            
            folderItem.classList.add('expanding');
            setTimeout(() => folderItem.classList.remove('expanding'), 300);
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                icon.textContent = '📁';
            } else {
                content.classList.add('expanded');
                icon.textContent = '📂';
            }
        }

        function selectItem(itemId, title) {
            // Remove previous selection
            if (currentSelection) {
                currentSelection.classList.remove('selected');
            }
            
            // Add selection to clicked item
            const item = event.target.closest('.folder-item');
            item.classList.add('selected');
            currentSelection = item;
            
            // Update main content with animation
            const mainContent = document.getElementById('main-content');
            mainContent.style.opacity = '0';
            
            setTimeout(() => {
                mainContent.innerHTML = `
                    <div class="animate-bounce-in">
                        <h1 class="text-3xl font-bold font-cal text-neon-blue mb-6">${title}</h1>
                        
                        <div class="space-y-6 text-zinc-300 font-display">
                            <div class="cyber-border p-6">
                                <h2 class="text-xl font-semibold text-neon-purple mb-4">Content Loading...</h2>
                                <p>This section will contain detailed information about ${title}.</p>
                                <p class="text-sm text-zinc-500 mt-4">Features coming soon: document browser, confidence tracking, cross-references.</p>
                            </div>
                            
                            <div class="cyber-border p-6">
                                <h2 class="text-xl font-semibold text-neon-blue mb-4">Related Content</h2>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div class="cyber-border p-3">
                                        <div class="flex items-center mb-2">
                                            <span class="confidence-indicator conf-verified"></span>
                                            <span class="font-semibold">Cross-References</span>
                                        </div>
                                        <p class="text-zinc-400">Connected topics and references</p>
                                    </div>
                                    <div class="cyber-border p-3">
                                        <div class="flex items-center mb-2">
                                            <span class="confidence-indicator conf-ai"></span>
                                            <span class="font-semibold">AI Insights</span>
                                        </div>
                                        <p class="text-zinc-400">Pattern analysis and connections</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                mainContent.style.opacity = '1';
            }, 150);
        }

        function toggleTool(toolId) {
            const toolPanel = document.getElementById('tool-panel');
            const toolContent = document.getElementById('tool-content');
            
            if (toolPanel.classList.contains('expanded')) {
                toolPanel.classList.remove('expanded');
            } else {
                let content = '';
                switch(toolId) {
                    case 'ana-index':
                        content = `
                            <h3 class="text-lg font-semibold text-neon-blue mb-3">Ana's Index Search</h3>
                            <input type="text" placeholder="Search FL documents..." class="w-full bg-black/40 border border-cyan-400/30 rounded px-3 py-2 text-sm text-zinc-200 mb-3">
                            <div class="text-xs text-zinc-400">Search through community-indexed FL documents</div>
                        `;
                        break;
                    case 'lexicon':
                        content = `
                            <h3 class="text-lg font-semibold text-neon-blue mb-3">Aylid Lexicon</h3>
                            <input type="text" placeholder="Search Aylid/English..." class="w-full bg-black/40 border border-cyan-400/30 rounded px-3 py-2 text-sm text-zinc-200 mb-3">
                            <div class="text-xs text-zinc-400">100+ verified Aylid-English translations</div>
                        `;
                        break;
                    case 'translation':
                        content = `
                            <h3 class="text-lg font-semibold text-neon-blue mb-3">AI Translation</h3>
                            <textarea placeholder="Paste FL text here..." class="w-full bg-black/40 border border-cyan-400/30 rounded px-3 py-2 text-sm text-zinc-200 mb-3 h-20"></textarea>
                            <button class="cyber-button text-xs">TRANSLATE</button>
                        `;
                        break;
                }
                
                toolContent.innerHTML = content;
                toolPanel.classList.add('expanded');
            }
        }

        function toggleChat() {
            const chatInterface = document.getElementById('chat-interface');
            const chatContent = document.getElementById('chat-content');
            const toggleText = document.getElementById('chat-toggle-text');
            
            if (chatExpanded) {
                chatInterface.classList.remove('chat-expanded');
                chatInterface.classList.add('chat-collapsed');
                chatContent.classList.add('hidden');
                toggleText.textContent = 'EXPAND';
                chatExpanded = false;
            } else {
                chatInterface.classList.remove('chat-collapsed');
                chatInterface.classList.add('chat-expanded');
                chatContent.classList.remove('hidden');
                toggleText.textContent = 'MINIMIZE';
                chatExpanded = true;
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            
            if (!input.value.trim()) return;
            
            // Add user message
            const userMsg = document.createElement('div');
            userMsg.className = 'mb-2 text-right';
            userMsg.innerHTML = `<div class="inline-block bg-cyan-500/20 border border-cyan-400/30 rounded-lg px-3 py-2 text-sm max-w-xs">${input.value}</div>`;
            messages.appendChild(userMsg);
            
            // Add AI response (simulated)
            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'mb-2';
                aiMsg.innerHTML = `<div class="inline-block bg-purple-500/20 border border-purple-400/30 rounded-lg px-3 py-2 text-sm max-w-xs">I'm analyzing that request. Full AI integration coming soon!</div>`;
                messages.appendChild(aiMsg);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
            
            input.value = '';
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
</body>
</html>
